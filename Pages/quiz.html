<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ÙˆØ°ÙƒØ± | Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø´Ø§Ù…Ù„</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@700&family=Cairo:wght@400;600;700;900&family=Reem+Kufi:wght@700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #f0f2f5;
            --card: #ffffff;
            --text: #1e272e;
            --gold: #d4af37;
            --correct: #27ae60;
            --wrong: #e74c3c;
            --nav-bg: linear-gradient(135deg, #1e272e, #2f3640);
            --shadow: 0 15px 35px rgba(0,0,0,0.1);
        }

        [data-theme="dark"] {
            --bg: #0f172a;
            --card: #1e293b;
            --text: #f1f5f9;
            --nav-bg: #1e293b;
            --shadow: 0 15px 40px rgba(0,0,0,0.3);
        }

        * { -webkit-tap-highlight-color: transparent; box-sizing: border-box; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }

        body {
            background-color: var(--bg); color: var(--text);
            font-family: 'Cairo', sans-serif; margin: 0; padding-bottom: 50px;
            overflow-x: hidden;
        }

        /* Ø§Ù„Ø³Ø§ÙƒÙˆØ±Ø§ */
        .sakura-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 0; }
        .leaf { position: absolute; background: #ffd1dc; border-radius: 100% 0 100% 0; opacity: 0.4; animation: fall linear infinite; }
        @keyframes fall {
            0% { transform: translateY(-10vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.4; }
            90% { opacity: 0.4; }
            100% { transform: translateY(110vh) rotate(360deg); opacity: 0; }
        }

        /* Ø§Ù„Ù†Ø§Ù Ø¨Ø§Ø± */
        .navbar {
            height: 70px; background: var(--nav-bg); display: flex; align-items: center;
            justify-content: space-between; padding: 0 20px;
            box-shadow: var(--shadow); position: sticky; top: 0; z-index: 100; color: #fff;
        }
        .nav-title { font-family: 'Reem Kufi', sans-serif; font-size: 1.2rem; color: var(--gold); }
        .nav-btn { width: 45px; height: 45px; display: grid; place-items: center; cursor: pointer; border-radius: 12px; background: rgba(255,255,255,0.1); color: #fff; }

        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… */
        .progress-container {
            position: sticky; top: 70px; z-index: 99; background: var(--bg); padding: 10px 0;
        }
        .progress-bar {
            height: 8px; background: var(--gold); width: 0%; border-radius: 0 5px 5px 0;
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.5);
        }

        .container { max-width: 800px; margin: 20px auto; padding: 0 20px; position: relative; z-index: 5; }

        .section-head {
            font-family: 'Reem Kufi', sans-serif; color: var(--gold);
            display: flex; align-items: center; gap: 12px; font-size: 1.4rem;
            margin: 40px 0 20px; padding-right: 10px; border-right: 4px solid var(--gold);
        }

        .question-card {
            background: var(--card); border-radius: 25px; padding: 25px;
            margin-bottom: 20px; box-shadow: var(--shadow); border: 1px solid rgba(0,0,0,0.02);
            animation: slideIn 0.5s ease backwards;
        }
        @keyframes slideIn { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

        .question-text { font-family: 'Amiri', serif; font-size: 1.4rem; font-weight: 700; margin-bottom: 20px; display: block; line-height: 1.5; }

        .input-wrapper { position: relative; }
        .quiz-input {
            width: 100%; padding: 15px 20px; border-radius: 15px; border: 2px solid var(--bg);
            background: var(--bg); color: var(--text); font-family: 'Amiri', serif;
            font-size: 1.3rem; outline: none; transition: 0.3s;
        }
        .quiz-input:focus { border-color: var(--gold); background: var(--card); box-shadow: 0 0 15px rgba(212, 175, 55, 0.1); }

        /* Ø§Ù„Ø­Ø§Ù„Ø§Øª */
        .correct-ans { border-color: var(--correct) !important; background: #f0fff4 !important; }
        .wrong-ans { border-color: var(--wrong) !important; background: #fff5f5 !important; }
        .empty-field { animation: shake 0.5s; border-color: var(--wrong) !important; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-10px); } 75% { transform: translateX(10px); } }

        .status-msg { margin-top: 12px; font-weight: 700; font-size: 0.95rem; display: none; padding-right: 5px; }

        /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù…Ø±ÙˆÙ‚Ø© */
        .action-btn {
            width: 100%; padding: 18px; border-radius: 20px; border: none;
            font-family: 'Reem Kufi', sans-serif; font-size: 1.3rem; cursor: pointer;
            margin-top: 20px; position: relative; overflow: hidden;
        }
        .btn-submit { background: var(--gold); color: white; box-shadow: 0 10px 20px rgba(212, 175, 55, 0.3); }
        .btn-submit:active { transform: scale(0.98); }

        /* Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ */
        .overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7); backdrop-filter: blur(8px);
            display: none; justify-content: center; align-items: center; z-index: 1000;
        }
        .modal {
            background: var(--card); padding: 35px; border-radius: 30px;
            text-align: center; max-width: 380px; width: 90%; animation: pop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes pop { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        /* Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© */
        #final-result {
            display: none; padding: 40px 20px; border-radius: 30px; color: white;
            text-align: center; margin-top: 30px; box-shadow: var(--shadow);
        }

    </style>
</head>
<body>

    <div class="sakura-container" id="sakura"></div>

    <nav class="navbar">
        <div class="nav-btn" onclick="toggleTheme()"><i class="fa-solid fa-moon"></i></div>
        <div class="nav-title">Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø´Ø§Ù…Ù„</div>
        <div class="nav-btn" onclick="history.back()"><i class="fa-solid fa-chevron-left"></i></div>
    </nav>

    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <div class="container">
        <form id="proQuiz">
            <div id="questions-loader"></div>
            
            <button type="button" class="action-btn btn-submit" id="submit-btn" onclick="checkBeforeSubmit()">
                Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© <i class="fa-solid fa-paper-plane" style="margin-right: 10px;"></i>
            </button>
            
            <button type="button" class="action-btn" id="restart-btn" style="display:none; background: var(--text); color: #fff;" onclick="location.reload()">
                Ø¨Ø¯Ø¡ Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙŠØ¯ ğŸ”„
            </button>
        </form>

        <div id="final-result"></div>
    </div>

    <div class="overlay" id="custom-modal">
        <div class="modal">
            <i class="fa-solid fa-triangle-exclamation" style="font-size: 4rem; color: var(--gold); margin-bottom: 20px;"></i>
            <h2 style="font-family: 'Reem Kufi'; margin-bottom: 10px;">Ø¨Ø§Ù‚ÙŠ ØªÙƒØ©!</h2>
            <p>Ù„Ø³Ù‡ ÙÙŠÙ‡ Ø£Ø³Ø¦Ù„Ø© Ù…Ø§ Ø§ØªØ­Ù„ØªØ´ØŒ ØªØ­Ø¨ Ù†Ø³Ù„Ù… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¯Ù„ÙˆÙ‚ØªÙŠ ÙˆÙ†Ø´ÙˆÙ Ø§Ù„Ù†ØªÙŠØ¬Ø©ØŸ</p>
            <div style="display: flex; gap: 10px; margin-top: 25px;">
                <button class="action-btn" style="background: var(--wrong); color: #fff; margin: 0; font-size: 1rem;" onclick="confirmSubmit()">ØªØ³Ù„ÙŠÙ…</button>
                <button class="action-btn" style="background: var(--correct); color: #fff; margin: 0; font-size: 1rem;" onclick="closeModal()">Ø§Ø³ØªÙƒÙ…Ø§Ù„</button>
            </div>
        </div>
    </div>

    <script>
        const quizData = [
    // Ù‚Ø³Ù… Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…
    { type: 'aya', q: "Ø£ÙƒÙ…Ù„ Ù‚ÙˆÙ„Ù‡ ØªØ¹Ø§Ù„Ù‰: { ÙÙÙ„ÙÙ…ÙÙ‘Ø§ Ù‚ÙØ¶ÙÙ‰Ù° _______ Ù…ÙÙ†Ù’Ù‡ÙØ§ ÙˆÙØ·ÙØ±Ù‹Ø§ Ø²ÙÙˆÙÙ‘Ø¬Ù’Ù†ÙØ§ÙƒÙÙ‡ÙØ§ }", a: "Ø²ÙŠØ¯" },
    { type: 'aya', q: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ø³ÙˆØ±Ø© Ø§Ù„ØªÙŠ ØªÙ†ØªÙ‡ÙŠ Ø¬Ù…ÙŠØ¹ Ø¢ÙŠØ§ØªÙ‡Ø§ Ø¨Ø­Ø±Ù Ø§Ù„Ø±Ø§Ø¡ØŸ", a: "Ø§Ù„ÙƒÙˆØ«Ø±" },
    { type: 'aya', q: "Ø³ÙˆØ±Ø© ØªØ³Ù…Ù‰ 'Ø§Ù„ÙØ§Ø¶Ø­Ø©' Ù„Ø£Ù†Ù‡Ø§ ÙƒØ´ÙØª Ø£Ø³Ø±Ø§Ø± Ø§Ù„Ù…Ù†Ø§ÙÙ‚ÙŠÙ†ØŒ ÙÙ…Ø§ Ù‡ÙŠØŸ", a: "Ø§Ù„ØªÙˆØ¨Ø©" },
    { type: 'aya', q: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ø¬Ø¯Ø§Øª ÙÙŠ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…ØŸ", a: "15" },
    
    // Ù‚Ø³Ù… Ø§Ù„Ø³ÙŠØ±Ø© ÙˆØ§Ù„Ø³Ù†Ø©
    { type: 'hadith', q: "Ù…Ù† Ù‡Ùˆ Ø§Ù„Ù†Ø¨ÙŠ Ø§Ù„Ø°ÙŠ Ø§Ù„ØªÙ‚Ù‰ Ø¨Ù‡ Ø§Ù„Ø±Ø³ÙˆÙ„ ï·º ÙÙŠ Ø§Ù„Ø³Ù…Ø§Ø¡ Ø§Ù„Ø³Ø§Ø¯Ø³Ø©ØŸ", a: "Ù…ÙˆØ³Ù‰" },
    { type: 'hadith', q: "ÙÙŠ Ø£ÙŠ Ø³Ù†Ø© Ù‡Ø¬Ø±ÙŠØ© ÙˆÙ‚Ø¹Øª ØºØ²ÙˆØ© Ø®ÙŠØ¨Ø±ØŸ", a: "7" },
    { type: 'hadith', q: "Ù…Ù† Ù‡Ùˆ Ø§Ù„ØµØ­Ø§Ø¨ÙŠ Ø§Ù„Ø°ÙŠ Ù„ÙÙ‚Ø¨ Ø¨Ù€ 'Ø£Ù…ÙŠÙ† Ù‡Ø°Ù‡ Ø§Ù„Ø£Ù…Ø©'ØŸ", a: "Ø£Ø¨Ùˆ Ø¹Ø¨ÙŠØ¯Ø© Ø¨Ù† Ø§Ù„Ø¬Ø±Ø§Ø­" },
    { type: 'hadith', q: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ù…Ø¹Ø±ÙƒØ© Ø§Ù„ØªÙŠ Ù„ÙÙ‚Ø¨Øª Ø¨Ù€ 'ÙØªØ­ Ø§Ù„ÙØªÙˆØ­'ØŸ", a: "Ù†Ù‡Ø§ÙˆÙ†Ø¯" },

    // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¯ÙŠÙ†ÙŠØ© Ø¹Ù…ÙŠÙ‚Ø©
    { type: 'general', q: "Ù…Ù† Ù‡Ùˆ Ø£ÙˆÙ„ Ù…Ù† ØµÙ†Ù ØªÙØ³ÙŠØ± Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… Ø¨Ø§Ù„Ø¥Ø³Ù†Ø§Ø¯ØŸ", a: "Ù…Ø§Ù„Ùƒ Ø¨Ù† Ø£Ù†Ø³" },
    { type: 'general', q: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ù„Ø£Ø¨ÙŠ Ø´ÙŠØ¨Ø© (ØµØ§Ø­Ø¨ Ø§Ù„Ù…ØµÙ†Ù)ØŸ", a: "Ø¹Ø¨Ø¯ Ø§Ù„Ù„Ù‡ Ø¨Ù† Ù…Ø­Ù…Ø¯" },
    { type: 'general', q: "ÙƒÙ… ÙƒØ§Ù† Ø¹Ù…Ø± Ø§Ù„Ù†Ø¨ÙŠ ï·º Ø¹Ù†Ø¯Ù…Ø§ Ø³Ø§ÙØ± Ù…Ø¹ Ø¹Ù…Ù‡ Ø£Ø¨Ùˆ Ø·Ø§Ù„Ø¨ Ø¥Ù„Ù‰ Ø§Ù„Ø´Ø§Ù… Ù„Ø£ÙˆÙ„ Ù…Ø±Ø©ØŸ", a: "12" },
    { type: 'general', q: "Ù…Ù† Ù‡ÙŠ Ø§Ù„ØµØ­Ø§Ø¨ÙŠØ© Ø§Ù„ØªÙŠ Ù‚ØªÙ„Øª 7 Ù…Ù† Ø§Ù„Ø±ÙˆÙ… ÙÙŠ Ù…Ø¹Ø±ÙƒØ© Ø§Ù„ÙŠØ±Ù…ÙˆÙƒØŸ", a: "Ø£Ø³Ù…Ø§Ø¡ Ø¨Ù†Øª Ø£Ø¨ÙŠ Ø¨ÙƒØ±" }
];


        function initQuiz() {
            const loader = document.getElementById('questions-loader');
            loader.innerHTML = "";
            quizData.forEach((item, index) => {
                let section = "";
                if (index === 0) section = '<div class="section-head"><i class="fa-solid fa-book-quran"></i> Ù‚Ø³Ù… Ø§Ù„Ù‚Ø±Ø¢Ù†</div>';
                if (index === 3) section = '<div class="section-head"><i class="fa-solid fa-scroll"></i> Ù‚Ø³Ù… Ø§Ù„Ø³Ù†Ø©</div>';
                if (index === 6) section = '<div class="section-head"><i class="fa-solid fa-mosque"></i> Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ø§Ù…Ø©</div>';

                loader.innerHTML += `
                    ${section}
                    <div class="question-card" style="animation-delay: ${index * 0.1}s">
                        <span class="question-text">${index + 1}. ${item.q}</span>
                        <div class="input-wrapper">
                            <input type="text" data-answer="${item.a}" data-type="${item.type}" 
                                   class="quiz-input" placeholder="Ø§ÙƒØªØ¨ Ø¥Ø¬Ø§Ø¨ØªÙƒ Ù‡Ù†Ø§..." oninput="updateProgress()">
                        </div>
                        <div class="status-msg"></div>
                    </div>
                `;
            });
            initSakura();
        }

        function updateProgress() {
            const inputs = document.querySelectorAll('.quiz-input');
            let filled = 0;
            inputs.forEach(input => { if(input.value.trim() !== "") filled++; });
            const percent = (filled / quizData.length) * 100;
            document.getElementById('progressBar').style.width = percent + "%";
        }

        function checkBeforeSubmit() {
            const inputs = document.querySelectorAll('.quiz-input');
            let filledCount = 0;
            let firstEmpty = null;

            inputs.forEach(input => {
                if (input.value.trim() !== "") filledCount++;
                else if (!firstEmpty) firstEmpty = input;
            });

            if (filledCount === 0) {
                if (firstEmpty) {
                    firstEmpty.parentElement.parentElement.classList.add('empty-field');
                    firstEmpty.focus();
                    setTimeout(() => firstEmpty.parentElement.parentElement.classList.remove('empty-field'), 1000);
                }
                return;
            }

            if (filledCount < quizData.length) {
                document.getElementById('custom-modal').style.display = 'flex';
            } else { evaluateQuiz(); }
        }

        function closeModal() { document.getElementById('custom-modal').style.display = 'none'; }
        function confirmSubmit() { closeModal(); evaluateQuiz(); }

        function evaluateQuiz() {
            const cards = document.querySelectorAll('.question-card');
            let score = 0;
            cards.forEach(card => {
                const input = card.querySelector('input');
                const msg = card.querySelector('.status-msg');
                const correctAns = input.getAttribute('data-answer');
                msg.style.display = "block";

                if (input.value.trim() === correctAns) {
                    score++;
                    input.classList.add('correct-ans');
                    msg.innerHTML = "âœ… Ø£Ø­Ø³Ù†Øª! Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©";
                    msg.style.color = "var(--correct)";
                } else {
                    input.classList.add('wrong-ans');
                    msg.innerHTML = `âŒ Ø®Ø·Ø£ØŒ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©: (${correctAns})`;
                    msg.style.color = "var(--wrong)";
                }
            });
            showFinalResult(score);
        }

        function showFinalResult(score) {
            const resultDiv = document.getElementById('final-result');
            const percent = (score / quizData.length) * 100;
            document.getElementById('submit-btn').style.display = "none";
            document.getElementById('restart-btn').style.display = "block";
            resultDiv.style.display = "block";

            resultDiv.style.backgroundColor = percent >= 80 ? "var(--correct)" : (percent >= 50 ? "#f39c12" : "var(--wrong)");
            resultDiv.innerHTML = `
                <h2 style="font-family:'Reem Kufi';">Ø§Ù„Ù†ØªÙŠØ¬Ø©: ${score} Ù…Ù† ${quizData.length}</h2>
                <p style="font-size: 1.3rem; font-weight:bold;">ØªÙ‚Ø¯ÙŠØ±Ùƒ: ${percent === 100 ? 'Ù…Ù…ØªØ§Ø² Ù…Ø¹ Ù…Ø±ØªØ¨Ø© Ø§Ù„Ø´Ø±Ù ğŸ†' : (percent >= 50 ? 'Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹ ğŸ‘' : 'Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ ğŸ“š')}</p>
            `;
            resultDiv.scrollIntoView({ behavior: 'smooth' });
            if(percent === 100 && navigator.vibrate) navigator.vibrate([100, 50, 100]);
        }

        function toggleTheme() {
            const b = document.body;
            b.hasAttribute('data-theme') ? b.removeAttribute('data-theme') : b.setAttribute('data-theme', 'dark');
        }

        function initSakura() {
            const container = document.getElementById('sakura');
            for(let i=0; i<15; i++){
                let leaf = document.createElement('div');
                leaf.className = 'leaf';
                leaf.style.left = Math.random() * 100 + '%';
                leaf.style.animationDuration = (Math.random() * 5 + 7) + 's';
                leaf.style.width = leaf.style.height = (Math.random() * 6 + 6) + 'px';
                container.appendChild(leaf);
            }
        }

        window.onload = initQuiz;
    </script>
</body>
</html>
